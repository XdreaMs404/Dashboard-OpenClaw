
> bmad-total-app@0.1.0 lint
> node ./scripts/lint.mjs

âœ… Lint OK

> bmad-total-app@0.1.0 typecheck
> node ./scripts/typecheck.mjs

âœ… Typecheck (syntax) OK

[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/root/.openclaw/workspace/projects/dashboard-openclaw/app[39m

 [32mâœ“[39m tests/edge/artifact-risk-annotations.edge.test.js [2m([22m[2m14 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m tests/unit/artifact-risk-annotations.test.js [2m([22m[2m11 tests[22m[2m)[22m[32m 32[2mms[22m[39m

[2m Test Files [22m [1m[32m2 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[32m25 passed[39m[22m[90m (25)[39m
[2m   Start at [22m 19:07:41
[2m   Duration [22m 462ms[2m (transform 326ms, setup 0ms, import 478ms, tests 54ms, environment 0ms)[22m


Running 2 tests using 2 workers

  âœ“  1 [chromium] â€º tests/e2e/artifact-risk-annotations.spec.js:486:1 â€º artifact risk annotations demo remains readable without horizontal overflow on mobile/tablet/desktop (1.9s)
  âœ“  2 [chromium] â€º tests/e2e/artifact-risk-annotations.spec.js:403:1 â€º artifact risk annotations demo covers empty/loading/error/success with reason, counters, tags, annotations, catalog and actions (2.6s)

  2 passed (4.0s)

> bmad-total-app@0.1.0 test:coverage
> vitest run --coverage


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/root/.openclaw/workspace/projects/dashboard-openclaw/app[39m
      [2mCoverage enabled with [22m[33mv8[39m

 [32mâœ“[39m tests/unit/artifact-version-diff.test.js [2m([22m[2m8 tests[22m[2m)[22m[32m 84[2mms[22m[39m
 [32mâœ“[39m tests/unit/artifact-section-extractor.test.js [2m([22m[2m12 tests[22m[2m)[22m[32m 90[2mms[22m[39m
 [32mâœ“[39m tests/unit/artifact-table-indexer.test.js [2m([22m[2m13 tests[22m[2m)[22m[32m 124[2mms[22m[39m
 [32mâœ“[39m tests/unit/artifact-fulltext-search.test.js [2m([22m[2m11 tests[22m[2m)[22m[32m 66[2mms[22m[39m
 [32mâœ“[39m tests/unit/artifact-evidence-graph.test.js [2m([22m[2m11 tests[22m[2m)[22m[32m 53[2mms[22m[39m
 [32mâœ“[39m tests/unit/artifact-staleness-indicator.test.js [2m([22m[2m10 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32mâœ“[39m tests/edge/artifact-fulltext-search.edge.test.js [2m([22m[2m25 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m tests/edge/artifact-table-indexer.edge.test.js [2m([22m[2m19 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m tests/unit/artifact-context-filter.test.js [2m([22m[2m10 tests[22m[2m)[22m[32m 54[2mms[22m[39m
 [32mâœ“[39m tests/unit/artifact-metadata-validator.test.js [2m([22m[2m11 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [32mâœ“[39m tests/edge/artifact-section-extractor.edge.test.js [2m([22m[2m19 tests[22m[2m)[22m[32m 37[2mms[22m[39m
 [31mâ¯[39m tests/unit/artifact-parse-diagnostics.test.js [2m([22m[2m10 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 46[2mms[22m[39m
     [32mâœ“[39m returns OK on nominal input without parse issues[32m 4[2mms[22m[39m
     [32mâœ“[39m returns ARTIFACT_PARSE_FAILED with parse issue details, recommendations and staleness context[32m 2[2mms[22m[39m
     [32mâœ“[39m prefers stalenessResult over stalenessInput[32m 0[2mms[22m[39m
     [32mâœ“[39m delegates to S021 via stalenessInput when stalenessResult absent[32m 3[2mms[22m[39m
     [32mâœ“[39m propagates strict upstream blocking reason codes from S021[32m 1[2mms[22m[39m
     [32mâœ“[39m returns PARSE_RETRY_LIMIT_REACHED when retry count equals maxRetries[32m 1[2mms[22m[39m
     [32mâœ“[39m returns PARSE_DLQ_REQUIRED when retry count exceeds maxRetries[32m 1[2mms[22m[39m
     [32mâœ“[39m keeps stable contract and public index export[32m 1[2mms[22m[39m
     [32mâœ“[39m meets performance threshold on synthetic corpus of 500 docs[32m 20[2mms[22m[39m
[31m     [31mÃ—[31m accepts output of buildArtifactStalenessIndicator as direct upstream source[39m[32m 12[2mms[22m[39m
 [32mâœ“[39m tests/edge/phase-transition-history.edge.test.js [2m([22m[2m21 tests[22m[2m)[22m[32m 34[2mms[22m[39m
 [32mâœ“[39m tests/edge/artifact-staleness-indicator.edge.test.js [2m([22m[2m19 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m tests/unit/artifact-risk-annotations.test.js [2m([22m[2m11 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32mâœ“[39m tests/edge/artifact-version-diff.edge.test.js [2m([22m[2m16 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m tests/edge/artifact-context-filter.edge.test.js [2m([22m[2m15 tests[22m[2m)[22m[32m 31[2mms[22m[39m
 [32mâœ“[39m tests/unit/phase-gate-governance-journal.test.js [2m([22m[2m8 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m tests/edge/phase-gate-governance-journal.edge.test.js [2m([22m[2m20 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m tests/edge/artifact-evidence-graph.edge.test.js [2m([22m[2m19 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m tests/edge/artifact-risk-annotations.edge.test.js [2m([22m[2m14 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m tests/unit/artifact-ingestion-pipeline.test.js [2m([22m[2m11 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m tests/edge/artifact-parse-diagnostics.edge.test.js [2m([22m[2m13 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m tests/unit/phase-transition-history.test.js [2m([22m[2m10 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m tests/edge/artifact-ingestion-pipeline.edge.test.js [2m([22m[2m20 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32mâœ“[39m tests/edge/phase-transition-override.edge.test.js [2m([22m[2m15 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mâœ“[39m tests/edge/phase-dependency-matrix.edge.test.js [2m([22m[2m18 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m tests/edge/phase-sla-alert.edge.test.js [2m([22m[2m17 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32mâœ“[39m tests/unit/phase-dependency-matrix.test.js [2m([22m[2m11 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m tests/edge/phase-progression-alert.edge.test.js [2m([22m[2m19 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mâœ“[39m tests/edge/phase-guards-orchestrator.edge.test.js [2m([22m[2m17 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m tests/unit/phase-state-projection.test.js [2m([22m[2m10 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m tests/edge/phase-state-projection.edge.test.js [2m([22m[2m22 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m tests/edge/artifact-metadata-validator.edge.test.js [2m([22m[2m15 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mâœ“[39m tests/unit/phase-transition-validator.test.js [2m([22m[2m8 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32mâœ“[39m tests/edge/phase-prerequisites-validator.edge.test.js [2m([22m[2m14 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mâœ“[39m tests/unit/phase-progression-alert.test.js [2m([22m[2m9 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mâœ“[39m tests/edge/core.edge.test.js [2m([22m[2m6 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32mâœ“[39m tests/unit/phase-guards-orchestrator.test.js [2m([22m[2m8 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m tests/unit/phase-transition-override.test.js [2m([22m[2m9 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mâœ“[39m tests/edge/phase-transition-validator.edge.test.js [2m([22m[2m8 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m tests/unit/phase-sla-alert.test.js [2m([22m[2m7 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m tests/unit/phase-prerequisites-validator.test.js [2m([22m[2m7 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32mâœ“[39m tests/unit/core.test.js [2m([22m[2m9 tests[22m[2m)[22m[32m 6[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 1 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m tests/unit/artifact-parse-diagnostics.test.js[2m > [22martifact-parse-diagnostics unit[2m > [22maccepts output of buildArtifactStalenessIndicator as direct upstream source
[31m[1mAssertionError[22m: expected 'ARTIFACT_STALENESS_DETECTED' to be 'OK' // Object.is equality[39m

Expected: [32m"OK"[39m
Received: [31m"ARTIFACT_STALENESS_DETECTED"[39m

[36m [2mâ¯[22m tests/unit/artifact-parse-diagnostics.test.js:[2m507:40[22m[39m
    [90m505| [39m    })[33m;[39m
    [90m506| [39m
    [90m507| [39m    [34mexpect[39m(stalenessResult[33m.[39mreasonCode)[33m.[39m[34mtoBe[39m([32m'OK'[39m)[33m;[39m
    [90m   | [39m                                       [31m^[39m
    [90m508| [39m    [34mexpect[39m(result[33m.[39mreasonCode)[33m.[39m[34mtoBe[39m([32m'OK'[39m)[33m;[39m
    [90m509| [39m    [34mexpect[39m(result[33m.[39mdiagnostics[33m.[39martifactsChecked)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m43 passed[39m[22m[90m (44)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m584 passed[39m[22m[90m (585)[39m
[2m   Start at [22m 19:07:48
[2m   Duration [22m 4.63s[2m (transform 959ms, setup 0ms, import 3.58s, tests 1.32s, environment 7ms)[22m

âŒ S023_TECH_GATES_FAILED(exit=1)
